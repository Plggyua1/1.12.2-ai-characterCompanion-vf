<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>AI Companion Dashboard</title>
  <style>
    body {
      font-family: monospace;
      background:#111;
      color:#eee;
      padding:20px;
    }
    .bot {
      border:1px solid #333;
      padding:10px;
      margin-bottom:10px;
    }
    .online { color:#00ff88 }
    .offline { color:#ff5555 }
  </style>
</head>
<body>

<h1>AI Companion Live Dashboard</h1>
<div id="bots">Connectingâ€¦</div>

<script>
const params = new URLSearchParams(location.search)
const key = params.get('key')

const ws = new WebSocket(`ws://${location.host}?key=${key}`)

ws.onmessage = ev => {
  const bots = JSON.parse(ev.data)
  const root = document.getElementById('bots')
  root.innerHTML = ''

  bots.forEach(b => {
    const div = document.createElement('div')
    div.className = 'bot'
    div.innerHTML = `
      <b>${b.name}</b><br>
      Status:
      <span class="${b.online ? 'online':'offline'}">
        ${b.online ? 'ONLINE':'OFFLINE'}
      </span><br>
      Restarts (1h): ${b.restartsLastHour}
    `
    root.appendChild(div)
  })
}

ws.onerror = () => {
  document.getElementById('bots').innerText = 'Connection error'
}
</script>

</body>
</html>
